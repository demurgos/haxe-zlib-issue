# Example zlib issue

This repo demonstrate an issue with zlib, haxe and Flash.

The following command fails:

```shell
haxe -main Main -swf-version 11 -debug -swf main.swf
```

Example output:

```terminal
# System
$ uname -a
Linux cyan 4.8.13-1-ARCH #1 SMP PREEMPT Fri Dec 9 07:24:34 CET 2016 x86_64 GNU/Linux

# List the installed packages
$ pacman -Q | grep --regexp=haxe --regexp="zlib"
haxe 3.4.0rc1-1
lib32-zlib 1.2.10-1
zlib 1:1.2.10-1

# Haxe version
$ haxe -version
3.4.0

# Try to build (added verbose: -v)
$ haxe -main Main -swf-version 11 -debug -swf main.swf -v
Classpath : ;/usr/share/haxe/std/flash/_std/;/usr/share/haxe/std/
Defines : true;source-header=Generated by Haxe 3.4.0;haxe_ver=3.4;haxe3;flash9;flash11;flash10_3;flash10_2;flash10_1;flash10;flash;debug;dce=std
Parsed /usr/share/haxe/std/StdTypes.hx
Parsed /usr/share/haxe/std/String.hx
Parsed /usr/share/haxe/std/Array.hx
Parsed /usr/share/haxe/std/haxe/EnumTools.hx
Parsed /usr/share/haxe/std/flash/_std/Std.hx
Parsed /usr/share/haxe/std/flash/Boot.hx
Parsed Main.hx
Parsed /usr/share/haxe/std/Class.hx
Parsed /usr/share/haxe/std/flash/display/MovieClip.hx
Parsed /usr/share/haxe/std/flash/display/Sprite.hx
Parsed /usr/share/haxe/std/flash/display/DisplayObjectContainer.hx
Parsed /usr/share/haxe/std/flash/display/InteractiveObject.hx
Parsed /usr/share/haxe/std/flash/display/DisplayObject.hx
Parsed /usr/share/haxe/std/flash/events/EventDispatcher.hx
Parsed /usr/share/haxe/std/flash/display/IBitmapDrawable.hx
Parsed /usr/share/haxe/std/flash/events/IEventDispatcher.hx
Parsed /usr/share/haxe/std/flash/events/Event.hx
Parsed /usr/share/haxe/std/flash/accessibility/AccessibilityProperties.hx
Parsed /usr/share/haxe/std/flash/display/BlendMode.hx
Parsed /usr/share/haxe/std/flash/display/Shader.hx
Parsed /usr/share/haxe/std/flash/filters/BitmapFilter.hx
Parsed /usr/share/haxe/std/flash/display/LoaderInfo.hx
Parsed /usr/share/haxe/std/UInt.hx
Parsed /usr/share/haxe/std/flash/geom/Rectangle.hx
Parsed /usr/share/haxe/std/flash/display/Stage.hx
Parsed /usr/share/haxe/std/flash/geom/Transform.hx
Parsed /usr/share/haxe/std/flash/geom/Point.hx
Parsed /usr/share/haxe/std/flash/geom/Vector3D.hx
Parsed /usr/share/haxe/std/flash/accessibility/AccessibilityImplementation.hx
Parsed /usr/share/haxe/std/flash/ui/ContextMenu.hx
Parsed /usr/share/haxe/std/flash/text/TextSnapshot.hx
Parsed /usr/share/haxe/std/flash/display/Graphics.hx
Parsed /usr/share/haxe/std/flash/media/SoundTransform.hx
Parsed /usr/share/haxe/std/flash/display/FrameLabel.hx
Parsed /usr/share/haxe/std/flash/display/Scene.hx
Parsed /usr/share/haxe/std/flash/utils/Object.hx
Parsed /usr/share/haxe/std/flash/text/TextField.hx
Parsed /usr/share/haxe/std/flash/errors/Error.hx
Parsed /usr/share/haxe/std/haxe/PosInfos.hx
Parsed /usr/share/haxe/std/flash/text/AntiAliasType.hx
Parsed /usr/share/haxe/std/flash/text/TextFieldAutoSize.hx
Parsed /usr/share/haxe/std/flash/text/TextFormat.hx
Parsed /usr/share/haxe/std/flash/text/GridFitType.hx
Parsed /usr/share/haxe/std/flash/text/StyleSheet.hx
Parsed /usr/share/haxe/std/flash/text/TextInteractionMode.hx
Parsed /usr/share/haxe/std/flash/text/TextFieldType.hx
Parsed /usr/share/haxe/std/flash/text/TextLineMetrics.hx
Parsed /usr/share/haxe/std/flash/text/TextFormatAlign.hx
Parsed /usr/share/haxe/std/flash/text/TextFormatDisplay.hx
Parsed /usr/share/haxe/std/flash/display/BitmapData.hx
Parsed /usr/share/haxe/std/flash/geom/Matrix.hx
Parsed /usr/share/haxe/std/flash/display/GradientType.hx
Parsed /usr/share/haxe/std/flash/display/SpreadMethod.hx
Parsed /usr/share/haxe/std/flash/display/InterpolationMethod.hx
Parsed /usr/share/haxe/std/flash/Vector.hx
Parsed /usr/share/haxe/std/flash/display/IGraphicsData.hx
Parsed /usr/share/haxe/std/flash/display/GraphicsPathWinding.hx
Parsed /usr/share/haxe/std/flash/display/TriangleCulling.hx
Parsed /usr/share/haxe/std/flash/display/LineScaleMode.hx
Parsed /usr/share/haxe/std/flash/display/CapsStyle.hx
Parsed /usr/share/haxe/std/flash/display/JointStyle.hx
Parsed /usr/share/haxe/std/flash/geom/ColorTransform.hx
Parsed /usr/share/haxe/std/flash/utils/ByteArray.hx
Parsed /usr/share/haxe/std/flash/display/StageQuality.hx
Parsed /usr/share/haxe/std/flash/utils/IDataOutput2.hx
Parsed /usr/share/haxe/std/flash/utils/IDataInput2.hx
Parsed /usr/share/haxe/std/flash/utils/IDataOutput.hx
Parsed /usr/share/haxe/std/flash/utils/Endian.hx
Parsed /usr/share/haxe/std/flash/utils/IDataInput.hx
Parsed /usr/share/haxe/std/flash/utils/CompressionAlgorithm.hx
Parsed /usr/share/haxe/std/flash/display/NativeMenu.hx
Parsed /usr/share/haxe/std/flash/ui/ContextMenuBuiltInItems.hx
Parsed /usr/share/haxe/std/flash/ui/ContextMenuClipboardItems.hx
Parsed /usr/share/haxe/std/flash/net/URLRequest.hx
Parsed /usr/share/haxe/std/flash/net/URLRequestHeader.hx
Parsed /usr/share/haxe/std/flash/geom/Matrix3D.hx
Parsed /usr/share/haxe/std/flash/geom/PerspectiveProjection.hx
Parsed /usr/share/haxe/std/flash/geom/Orientation3D.hx
Parsed /usr/share/haxe/std/flash/display/StageAlign.hx
Parsed /usr/share/haxe/std/flash/display/ColorCorrection.hx
Parsed /usr/share/haxe/std/flash/display/ColorCorrectionSupport.hx
Parsed /usr/share/haxe/std/flash/display/StageDisplayState.hx
Parsed /usr/share/haxe/std/flash/display/StageScaleMode.hx
Parsed /usr/share/haxe/std/flash/display/Stage3D.hx
Parsed /usr/share/haxe/std/flash/media/StageVideo.hx
Parsed /usr/share/haxe/std/flash/media/AVStream.hx
Parsed /usr/share/haxe/std/flash/media/Camera.hx
Parsed /usr/share/haxe/std/flash/net/NetStream.hx
Parsed /usr/share/haxe/std/flash/net/NetStreamInfo.hx
Parsed /usr/share/haxe/std/flash/net/NetStreamMulticastInfo.hx
Parsed /usr/share/haxe/std/flash/media/VideoStreamSettings.hx
Parsed /usr/share/haxe/std/flash/net/NetConnection.hx
Parsed /usr/share/haxe/std/flash/media/Microphone.hx
Parsed /usr/share/haxe/std/flash/net/NetStreamPlayOptions.hx
Parsed /usr/share/haxe/std/flash/media/SoundCodec.hx
Parsed /usr/share/haxe/std/flash/media/MicrophoneEnhancedOptions.hx
Parsed /usr/share/haxe/std/flash/media/MicrophoneEnhancedMode.hx
Parsed /usr/share/haxe/std/flash/net/Responder.hx
Parsed /usr/share/haxe/std/flash/media/AVCaptionStyle.hx
Parsed /usr/share/haxe/std/flash/media/AVPlayState.hx
Parsed /usr/share/haxe/std/flash/media/AVSource.hx
Parsed /usr/share/haxe/std/flash/media/AVResult.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3D.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3DProfile.hx
Parsed /usr/share/haxe/std/flash/display3D/textures/CubeTexture.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3DTextureFormat.hx
Parsed /usr/share/haxe/std/flash/display3D/IndexBuffer3D.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3DBufferUsage.hx
Parsed /usr/share/haxe/std/flash/display3D/Program3D.hx
Parsed /usr/share/haxe/std/flash/display3D/textures/RectangleTexture.hx
Parsed /usr/share/haxe/std/flash/display3D/textures/Texture.hx
Parsed /usr/share/haxe/std/flash/display3D/VertexBuffer3D.hx
Parsed /usr/share/haxe/std/flash/display3D/textures/VideoTexture.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3DBlendFactor.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3DTriangleFace.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3DCompareMode.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3DProgramType.hx
Parsed /usr/share/haxe/std/flash/display3D/textures/TextureBase.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3DWrapMode.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3DTextureFilter.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3DMipFilter.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3DStencilAction.hx
Parsed /usr/share/haxe/std/flash/display3D/Context3DVertexBufferFormat.hx
Parsed /usr/share/haxe/std/flash/display/ActionScriptVersion.hx
Parsed /usr/share/haxe/std/flash/system/ApplicationDomain.hx
Parsed /usr/share/haxe/std/flash/display/Loader.hx
Parsed /usr/share/haxe/std/flash/events/UncaughtErrorEvents.hx
Parsed /usr/share/haxe/std/flash/system/LoaderContext.hx
Parsed /usr/share/haxe/std/flash/system/ImageDecodingPolicy.hx
Parsed /usr/share/haxe/std/flash/system/SecurityDomain.hx
Parsed /usr/share/haxe/std/flash/display/ShaderData.hx
Parsed /usr/share/haxe/std/flash/display/ShaderPrecision.hx
Parsed /usr/share/haxe/std/flash/events/EventPhase.hx
Parsed /usr/share/haxe/std/EnumValue.hx
Parsed /usr/share/haxe/std/Enum.hx
Typing haxe.EnumTools.getName
Parsed /usr/share/haxe/std/flash/_std/Type.hx
Typing Type.getEnumName
Typing Type.getClassName
Typing Type.getClass
Typing Type.getEnum
Typing Type.getSuperClass
Typing Type.resolveClass
Typing Type.resolveEnum
Typing Type.createInstance
Typing Type.createEmptyInstance
Typing flash.Boot.skip_constructor
Typing Type.createEnum
Parsed /usr/share/haxe/std/flash/_std/Reflect.hx
Parsed /usr/share/haxe/std/haxe/Constraints.hx
Typing Reflect.isFunction
Typing Reflect.callMethod
Typing Reflect.hasField
Typing Reflect.field
Typing Reflect.setField
Typing Reflect.getProperty
Typing Reflect.setProperty
Typing Reflect.fields
Typing Reflect.compare
Typing Reflect.compareMethods
Typing Reflect.isObject
Typing Reflect.isEnumValue
Typing Reflect.deleteField
Typing Reflect.copy
Typing Reflect.makeVarArgs
Typing Type.createEnumIndex
Typing Type.describe
Parsed /usr/share/haxe/std/flash/xml/XML.hx
Parsed /usr/share/haxe/std/flash/xml/XMLList.hx
Parsed /usr/share/haxe/std/flash/utils/Namespace.hx
Parsed /usr/share/haxe/std/flash/utils/Function.hx
Parsed /usr/share/haxe/std/IntIterator.hx
Typing Std.string
Typing flash.Boot.__string_rec
Typing IntIterator.new
Typing IntIterator.hasNext
Typing IntIterator.next
Typing Type.getInstanceFields
Typing Type.getClassFields
Typing Type.getEnumConstructs
Typing Type.typeof
Typing Std.int
Typing Type.enumEq
Typing Type.enumConstructor
Typing Type.enumParameters
Typing Type.enumIndex
Typing Type.allEnums
Typing haxe.EnumTools.createByName
Typing haxe.EnumTools.createByIndex
Typing haxe.EnumTools.createAll
Typing haxe.EnumTools.getConstructors
Typing haxe.EnumValueTools.equals
Typing haxe.EnumValueTools.getName
Typing haxe.EnumValueTools.getParameters
Typing haxe.EnumValueTools.getIndex
Typing flash._Boot.RealBoot.new
Parsed /usr/share/haxe/std/flash/Lib.hx
Typing flash.Boot.start
Typing flash.Boot.doInitDelay
Typing flash.Boot.init
Typing flash.Lib.getTimer
Typing flash.Lib.eval
Typing flash.Lib.getURL
Typing flash.Lib.fscommand
Typing flash.Lib.trace
Typing flash.Lib.describeType
Typing flash.Lib.attach
Typing flash.Lib.as
Typing flash.Lib.redirectTraces
Parsed /usr/share/haxe/std/flash/external/ExternalInterface.hx
Parsed /usr/share/haxe/std/haxe/Log.hx
Typing haxe.Log.trace
Typing flash.Boot.__trace
Typing flash.Boot.getTrace
Parsed /usr/share/haxe/std/flash/filters/GlowFilter.hx
Typing flash.Lib.traceToConsole
Typing haxe.Log.clear
Typing flash.Boot.__clear_trace
Typing haxe.Log.setColor
Typing flash.Boot.__set_trace_color
Typing _UInt.UInt_Impl_.shr
Typing flash.Vector.ofArray
Typing flash.Vector.convert
Typing flash.Boot.IN_E
Typing flash.Boot.enum_to_string
Typing flash.Boot.__instanceof
Typing flash.Boot.__unprotect__
Typing flash.Boot.mapDynamic
Typing Std.is
Typing flash.Boot.filterDynamic
Typing flash.Boot.__init__
Typing Std.instance
Typing Std.parseInt
Typing Std.parseFloat
Typing Std.random
Parsed /usr/share/haxe/std/Math.hx
Typing Math.__init__
Typing Main.main
Parsed /usr/share/haxe/std/StdTypes.hx
Parsed /usr/share/haxe/std/String.hx
Parsed /usr/share/haxe/std/Array.hx
Parsed /usr/share/haxe/std/haxe/EnumTools.hx
Parsed /usr/share/haxe/std/Reflect.hx
Parsed /usr/share/haxe/std/haxe/Constraints.hx
Parsed /usr/share/haxe/std/EnumValue.hx
Parsed /usr/share/haxe/std/Enum.hx
Typing haxe.EnumTools.getName
Parsed /usr/share/haxe/std/Type.hx
Parsed /usr/share/haxe/std/Class.hx
Typing haxe.EnumTools.createByName
Typing haxe.EnumTools.createByIndex
Typing haxe.EnumTools.createAll
Typing haxe.EnumTools.getConstructors
Typing haxe.EnumValueTools.equals
Typing haxe.EnumValueTools.getName
Typing haxe.EnumValueTools.getParameters
Typing haxe.EnumValueTools.getIndex
Parsed /usr/share/haxe/std/Std.hx
Generating swf: main.swf
Error: zlib_deflate

# Print exit code of the haxe command
$ echo $?
1
```
